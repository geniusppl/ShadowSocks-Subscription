- name: Update Subscription Link File  # 步骤名称：更新订阅链接文件
        uses: actions/github-script@v6  # 使用 actions/github-script@v6 action，用于执行 JavaScript 脚本与 GitHub API 交互
        with:
          script: |
            const subscriptionLink = "${{ steps.extract_link.outputs.subscription_link }}";
            const contentBase64 = Buffer.from(subscriptionLink).toString('base64');
            const path = 'subscription_link.txt';
            const owner = context.repo.owner;
            const repo = context.repo.repo;

            try {
              const getFileResponse = await github.rest.repos.getContent({
                owner: owner,
                repo: repo,
                path: path,
              });

              await github.rest.repos.createOrUpdateFileContents({
                owner: owner,
                repo: repo,
                path: path,
                message: 'Update subscription link daily',
                content: contentBase64,
                sha: getFileResponse.data.sha,
              });
              console.log('Subscription link file updated successfully!');
            } catch (error) {
              if (error.status === 404) {
                await github.rest.repos.createOrUpdateFileContents({
                  owner: owner,
                  repo: repo,
                  path: path,
                  message: 'Create subscription link file',
                  content: contentBase64,
                });
                console.log('Subscription link file created successfully!');
              } else {
                console.error('Error updating/creating subscription link file:', error);
                throw error;
              }
            }
